</html>
<!DOCTYPE html>
<html lang="fr" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transfer - Pay My Buddy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container-fluid p-3">
        <img th:src="@{/images/logo.png}" alt="Logo" height="80" class="ms-3">
    </div>

    <div th:replace="fragments/navbar :: navbar('transfer')"></div>

    <div class="container bg-white p-4 shadow rounded" style="max-width: 400px;">
        <h2 class="mb-4">Transfert</h2>
        <p><strong>Solde disponible :</strong> <span th:text="${user.balance}"></span></p>
        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>
        <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
        <form th:action="@{/transfer}" method="post">
            <select name="friendId" class="form-select mb-3" required>
                <option value="" disabled selected>Sélectionner une relation</option>
                <option th:each="friend : ${friends}" th:value="${friend.id}" th:text="${friend.name}"></option>
            </select>
            <input type="text" class="form-control mb-3" placeholder="Description" name="description" required>
            <input type="number" class="form-control mb-3" placeholder="Montant" step="0.01" min="0.01" name="amount" required>
            <button class="btn btn-primary w-100">Payer</button>
        </form>
    </div>
    <div class="container bg-white p-4 shadow rounded mt-4">
        <h3 class="mb-3">Historique des transactions</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Relation</th>
                    <th scope="col">Description</th>
                    <th scope="col">Montant</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="transaction : ${transactions}">
                     <td th:text="${#dates.format(transaction.createdAt, 'EEEE dd MMMM yyyy HH:mm')}"></td>
                     <td th:text="${transaction.friendName}"></td>
                     <td th:text="${transaction.description}"></td>
                     <td th:text="${transaction.amount + ' €'}"></td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>
